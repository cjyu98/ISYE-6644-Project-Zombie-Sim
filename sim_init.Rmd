---
title: "ISYE 6644 - Project"
output: html_notebook
---
Code intended for mostly exploring Epimodel as a package/capabilities

# Original Example
Initial code pulled from: https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5931789/
from Example 1

```{r init, warning=FALSE, message=FALSE}
# clear environment
rm(list=ls())

# libraries
library(EpiModel)
```


```{r}
set.seed(12345)
#SIS sample model

nw <- network::network.initialize(n = 1000, directed = FALSE) # n is number of nodes
nw <- network::set.vertex.attribute(nw, "risk", rep(0:1, each = 500))
formation <- ~edges + nodefactor("risk") + nodematch("risk") + concurrent
target.stats <- c(250, 375, 225, 100)
coef.diss <- dissolution_coefs(dissolution = ~ offset(edges), duration = 80)
coef.diss

```
```{r}
est1 <- netest(nw, formation, target.stats, coef.diss)
dx <- netdx(est1, nsims = 10, nsteps = 1000)
dx
```

```{r}
init <- init.net(i.num = 50)
param <- param.net(inf.prob = 0.1, act.rate = 5, rec.rate = 0.02)
control <- control.net(type = "SIS", nsteps = 500, nsims = 10, epi.by = "risk")
sim1 <- netsim(est1, param, init, control)
```

```{r}
summary(sim1, 500)
```
Code pulled from: https://epimodel.github.io/epimodel-training/basics_of_network_models/sis_basics.html and https://epimodel.github.io/epimodel-training/network_models_with_feedback/vaccine_intervention.html

# Main SIR model

Adjusted for an SIR model, added in inter.eff & inter.start for intervention

```{r}
# temporal ergm set up
nw <- network_initialize(n = 100) #n is number of nodes in the network
# set attributes???

formation <- ~edges #set up edges and any other constraints
target.stats <- 50 #goal
coef.diss <- dissolution_coefs(dissolution = ~offset(edges), duration = 20) # some kind of mathematical model to pair
est <- netest(nw, formation, target.stats, coef.diss, verbose = FALSE) #estimate coefficients of the network


param <- param.net(inf.prob = 0.5, inter.eff = rnorm(1), inter.start = 25, rec.rate = 0.02) #infection probability, efficacy of intervention, when does it intervene
init <- init.net(i.num = 5, r.num = 10) #how many people are infected/recovered at the start
control <- control.net(type = "SIR", nsteps = 100, nsims = 10, ncores = 5) #simulation parameters
sim <- netsim(est, param, init, control) #run the sim
plot(sim)
```



